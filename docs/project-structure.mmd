graph LR
    subgraph "ğŸ¥ Backend IronHealth - Project Structure"
        ROOT["ğŸ“ /backend-ironhealth"]
        
        subgraph "âš™ï¸ Configuration Files"
            ENV["ğŸ” .env<br/>Environment Variables"]
            PKG["ğŸ“¦ package.json<br/>Dependencies & Scripts"]
            ESLINT["ğŸ” .eslintrc.json<br/>Linting Rules"]
            PRETTIER["âœ¨ .prettierrc<br/>Code Formatting"]
            JEST["ğŸ§ª jest.config.cjs<br/>Test Configuration"]
        end
        
        subgraph "ğŸš€ Entry Point"
            APP["âš¡ app.js<br/>Express Server Setup<br/>Routes Registration<br/>MongoDB Connection"]
        end
        
        subgraph "ğŸ¯ API Layer"
            API["ğŸ“‚ api/"]
            
            subgraph "ğŸ›£ï¸ Routes"
                R_AUTH["ğŸ”‘ auth.route.js"]
                R_USERS["ğŸ‘¤ users.route.js"]
                R_PATIENTS["ğŸ¥ patients.route.js"]
                R_PROFESSIONALS["ğŸ‘¨â€âš•ï¸ professionals.route.js"]
                R_APPOINTMENTS["ğŸ“… appointments.route.js"]
                R_EMAIL["ğŸ“§ email.route.js"]
            end
            
            subgraph "ğŸ® Controllers"
                C_AUTH["ğŸ”‘ auth.controller.js<br/>login, changePassword, logout"]
                C_USERS["ğŸ‘¤ users.controller.js"]
                C_PATIENTS["ğŸ¥ patients.controller.js"]
                C_PROFESSIONALS["ğŸ‘¨â€âš•ï¸ professionals.controller.js"]
                C_APPOINTMENTS["ğŸ“… appointments.controller.js"]
                C_EMAIL["ğŸ“§ email.controller.js"]
            end
            
            subgraph "âœ… Validators"
                V_AUTH["ğŸ”’ auth.validators.js<br/>express-validator"]
                V_PATIENT["ğŸ¥ patient.validators.js"]
                V_PROFESSIONAL["ğŸ‘¨â€âš•ï¸ professionals.validators.js"]
                V_APPOINTMENT["ğŸ“… appointment.validators.js"]
            end
            
            subgraph "ğŸ—„ï¸ Models"
                M_USER["ğŸ‘¤ User.model.js<br/>Mongoose Schema"]
                M_PATIENT["ğŸ¥ Patient.model.js"]
                M_PROFESSIONAL["ğŸ‘¨â€âš•ï¸ professionals.model.js"]
                M_APPOINTMENT["ğŸ“… Appointment.model.js"]
            end
            
            subgraph "ğŸ›¡ï¸ Middlewares"
                MW_AUTH["ğŸ” auth.js<br/>verifyToken<br/>requireRole<br/>requireOwnProfile"]
                MW_RESPONSE["ğŸ“¤ responseHandler.js<br/>success/error helpers"]
                MW_SIGNATURE["âœï¸ getSignature.js"]
            end
            
            subgraph "ğŸ”§ Services"
                SVC_EMAIL["ğŸ“¨ email/<br/>Email Service<br/>Resend Integration"]
            end
            
            subgraph "ğŸ› ï¸ Utils"
                U_CODES["ğŸ’¬ messageCodes.js"]
                U_DNI["ğŸ†” validateDNI.js"]
                U_EMAIL["ğŸ“§ validateEmail.js"]
                U_ICS["ğŸ“† ics.js<br/>Calendar Events"]
                U_COLOR["ğŸ¨ assignColor.js"]
            end
            
            subgraph "âš™ï¸ Config"
                CFG_CLOUD["â˜ï¸ cloudinary.js<br/>Image Upload"]
                CFG_MONGO["ğŸ—„ï¸ mongoConfigTesting.js"]
            end
            
            subgraph "ğŸŒ± Seeds"
                SEED_ADMIN["ğŸ‘‘ adminSeed.js"]
                SEED_UPDATE["ğŸ”„ updateAdminSeed.js"]
            end
            
            subgraph "ğŸ“Š Data"
                DATA_PROF["ğŸ“‹ professions.json"]
            end
        end
        
        subgraph "ğŸ§ª Testing"
            TESTS["ğŸ§ª __tests__/<br/>Jest Test Suites"]
        end
        
        subgraph "ğŸ“œ Scripts"
            SCRIPT_EMAIL["ğŸ“§ testEmail.mjs"]
        end
        
        ROOT --> APP
        ROOT --> API
        ROOT --> TESTS
        ROOT --> SCRIPTS
        ROOT --> ENV
        ROOT --> PKG
        ROOT --> ESLINT
        ROOT --> PRETTIER
        ROOT --> JEST
        
        API --> R_AUTH & R_USERS & R_PATIENTS & R_PROFESSIONALS & R_APPOINTMENTS & R_EMAIL
        API --> C_AUTH & C_USERS & C_PATIENTS & C_PROFESSIONALS & C_APPOINTMENTS & C_EMAIL
        API --> V_AUTH & V_PATIENT & V_PROFESSIONAL & V_APPOINTMENT
        API --> M_USER & M_PATIENT & M_PROFESSIONAL & M_APPOINTMENT
        API --> MW_AUTH & MW_RESPONSE & MW_SIGNATURE
        API --> SVC_EMAIL
        API --> U_CODES & U_DNI & U_EMAIL & U_ICS & U_COLOR
        API --> CFG_CLOUD & CFG_MONGO
        API --> SEED_ADMIN & SEED_UPDATE
        API --> DATA_PROF
    end
    
    %% Root and Entry Point
    style ROOT fill:#1e88e5,stroke:#1565c0,stroke-width:3px,color:#fff
    style APP fill:#43a047,stroke:#2e7d32,stroke-width:3px,color:#fff
    
    %% Configuration Files
    style ENV fill:#7e57c2,stroke:#5e35b1,stroke-width:2px,color:#fff
    style PKG fill:#ef5350,stroke:#c62828,stroke-width:2px,color:#fff
    style ESLINT fill:#5c6bc0,stroke:#3949ab,stroke-width:2px,color:#fff
    style PRETTIER fill:#ff7043,stroke:#d84315,stroke-width:2px,color:#fff
    style JEST fill:#ec407a,stroke:#c2185b,stroke-width:2px,color:#fff
    
    %% API Layer
    style API fill:#26a69a,stroke:#00897b,stroke-width:3px,color:#fff
    
    %% Routes - Blue Tones
    style R_AUTH fill:#42a5f5,stroke:#1e88e5,stroke-width:2px,color:#fff
    style R_USERS fill:#42a5f5,stroke:#1e88e5,stroke-width:2px,color:#fff
    style R_PATIENTS fill:#42a5f5,stroke:#1e88e5,stroke-width:2px,color:#fff
    style R_PROFESSIONALS fill:#42a5f5,stroke:#1e88e5,stroke-width:2px,color:#fff
    style R_APPOINTMENTS fill:#42a5f5,stroke:#1e88e5,stroke-width:2px,color:#fff
    style R_EMAIL fill:#42a5f5,stroke:#1e88e5,stroke-width:2px,color:#fff
    
    %% Controllers - Green Tones
    style C_AUTH fill:#66bb6a,stroke:#43a047,stroke-width:2px,color:#fff
    style C_USERS fill:#66bb6a,stroke:#43a047,stroke-width:2px,color:#fff
    style C_PATIENTS fill:#66bb6a,stroke:#43a047,stroke-width:2px,color:#fff
    style C_PROFESSIONALS fill:#66bb6a,stroke:#43a047,stroke-width:2px,color:#fff
    style C_APPOINTMENTS fill:#66bb6a,stroke:#43a047,stroke-width:2px,color:#fff
    style C_EMAIL fill:#66bb6a,stroke:#43a047,stroke-width:2px,color:#fff
    
    %% Validators - Orange Tones
    style V_AUTH fill:#ffa726,stroke:#fb8c00,stroke-width:2px,color:#fff
    style V_PATIENT fill:#ffa726,stroke:#fb8c00,stroke-width:2px,color:#fff
    style V_PROFESSIONAL fill:#ffa726,stroke:#fb8c00,stroke-width:2px,color:#fff
    style V_APPOINTMENT fill:#ffa726,stroke:#fb8c00,stroke-width:2px,color:#fff
    
    %% Models - Purple Tones
    style M_USER fill:#ab47bc,stroke:#8e24aa,stroke-width:2px,color:#fff
    style M_PATIENT fill:#ab47bc,stroke:#8e24aa,stroke-width:2px,color:#fff
    style M_PROFESSIONAL fill:#ab47bc,stroke:#8e24aa,stroke-width:2px,color:#fff
    style M_APPOINTMENT fill:#ab47bc,stroke:#8e24aa,stroke-width:2px,color:#fff
    
    %% Middlewares - Red Tones
    style MW_AUTH fill:#ef5350,stroke:#e53935,stroke-width:2px,color:#fff
    style MW_RESPONSE fill:#ef5350,stroke:#e53935,stroke-width:2px,color:#fff
    style MW_SIGNATURE fill:#ef5350,stroke:#e53935,stroke-width:2px,color:#fff
    
    %% Services - Teal
    style SVC_EMAIL fill:#26a69a,stroke:#00897b,stroke-width:2px,color:#fff
    
    %% Utils - Cyan Tones
    style U_CODES fill:#29b6f6,stroke:#039be5,stroke-width:2px,color:#fff
    style U_DNI fill:#29b6f6,stroke:#039be5,stroke-width:2px,color:#fff
    style U_EMAIL fill:#29b6f6,stroke:#039be5,stroke-width:2px,color:#fff
    style U_ICS fill:#29b6f6,stroke:#039be5,stroke-width:2px,color:#fff
    style U_COLOR fill:#29b6f6,stroke:#039be5,stroke-width:2px,color:#fff
    
    %% Config - Indigo
    style CFG_CLOUD fill:#5c6bc0,stroke:#3949ab,stroke-width:2px,color:#fff
    style CFG_MONGO fill:#5c6bc0,stroke:#3949ab,stroke-width:2px,color:#fff
    
    %% Seeds - Lime
    style SEED_ADMIN fill:#9ccc65,stroke:#7cb342,stroke-width:2px,color:#fff
    style SEED_UPDATE fill:#9ccc65,stroke:#7cb342,stroke-width:2px,color:#fff
    
    %% Data - Amber
    style DATA_PROF fill:#ffca28,stroke:#ffb300,stroke-width:2px,color:#000
    
    %% Testing - Pink
    style TESTS fill:#ec407a,stroke:#c2185b,stroke-width:3px,color:#fff
    
    %% Scripts - Deep Orange
    style SCRIPT_EMAIL fill:#ff7043,stroke:#f4511e,stroke-width:3px,color:#fff
